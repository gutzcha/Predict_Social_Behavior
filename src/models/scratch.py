from utils.helper_functions import normalize_pose, create_affine_transform_matrix, plot_side_by_side
from utils.consts import EDGES
import numpy as np
import matplotlib.pyplot as plt

def plot_joints(pose_set):
    set1 = pose_set[:, :, 0].squeeze()
    set2 = pose_set[:, :, 1].squeeze()

    plt.scatter(set1[:,0], set1[:,1])
    plt.scatter(set2[:,0], set2[:,1])
    plt.show()
    return




array = np.array([[[[431.53273637, 148.54615359],
                    [124.63339389, 111.15025331]],
                   [[431.13303417, 184.98404688],
                    [80.17868669, 113.04888207]],
                   [[403.81661054, 176.79215159],
                    [107.88823763, 77.34610639]],
                   [[444.671415, 167.9],
                    [101.585715, 125.72857]],
                   [[494.45715, 174.58571],
                    [134.17143, 236.6]],
                   [[481.4241151, 224.7627485],
                    [76.90594095, 214.34799581]],
                   [[502.81744362, 196.61082926],
                    [93.74076138, 225.06394816]],
                   [[494.76319498, 231.34491287],
                    [78.67620963, 207.36495526]]],
                  [[[433.13124937, 149.42316877],
                    [125.49565364, 105.0266388]],
                   [[432.40310322, 186.44382929],
                    [81.4899377, 109.22672141]],
                   [[403.44212756, 178.69289632],
                    [110.40466462, 75.40514466]],
                   [[444.7, 169.38571],
                    [102., 119.942855]],
                   [[495.44287, 174.2],
                    [134.24286, 233.38571]],
                   [[482.68282168, 223.22538732],
                    [77.8116464, 211.72545069]],
                   [[503.31554307, 197.3646748],
                    [92.58103273, 224.08558559]],
                   [[496.60895219, 233.01234427],
                    [77.80575241, 208.29694898]]],
                  [[[434.12684329, 150.88101359],
                    [124.0803287, 98.91526392]],
                   [[430.07911338, 188.55187016],
                    [82.00200778, 103.04889378]],
                   [[408.42961053, 179.85355237],
                    [109.29315132, 68.0657345]],
                   [[444.75715, 171.4],
                    [102.37143, 113.64286]],
                   [[495.2857, 174.35715],
                    [134.17143, 231.071425]],
                   [[484.41373277, 223.49588599],
                    [79.31079656, 210.63032835]],
                   [[502.3513922, 194.72345886],
                    [93.8380145, 220.79762964]],
                   [[496.72742007, 233.17803205],
                    [77.68342407, 206.50365037]]]])
array = array[:3,:,:,:]
points1 = array[:,3,:,0]
points2 = array[:,4,:,0]
ret = normalize_pose(array, anchor_inds=[3,4])

frame_ind = 1
obj_ind = 0
joints1 = ret[frame_ind,:,:,obj_ind].squeeze()
joints2 = array[frame_ind,:,:,obj_ind].squeeze()
edges1 = edges2 = EDGES
plot_side_by_side(joints1, edges1, joints2, edges2, labels=None, match_axis=False)
# plot_joints(ret[2,:,:,:].squeeze())